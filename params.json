{
  "name": "C# File Encryption Tutorial",
  "tagline": "",
  "body": "# Overview\r\nThis tutorial will show you how to encrypt files using the .NET Crypto API. We start off simple and add features one step at a time. All of the code is available for each step, so you can follow along or just play with the final version if you prefer.\r\n\r\n# Tutorial 1\r\nIn this tutorial we start with an empty project and add just enough code to encrypt a single file. The result is a console program that, given a filename, will encrypt that file and write it out to a new file. A sample of usage might look something like this:\r\n\r\n`tutorial01 myfile.txt myfile.crypto`\r\n\r\n## Symmetric Encryption\r\nBefore we jump into the code, let's talk a little bit about the nature of cryptography. If you want to securely encrypt anything, you don't want to create your own encryption algorithms. There are lots of ways to encrypt data and most of them are wrong. Stick to proven methods that have been rigorously tested. Fortunately, we have several such algorithms available in .NET right out of the box, so we don't have to look to far.\r\n\r\nWhen we encrypt lots of data (such as a file) we typically use a *symmetric algorithm*. In cryptography when we use the term *symmetric* we mean that the same credentials that are used to encrypt the data are used to decrypt the data. A common example of this is when you password protect a zip archive. You use a password when you lock the archive and you must use the same password to unlock the archive. If you lose or forget the password, you can't access the archive any more.\r\n\r\nThe current standard symmetric algorithm is called [AES (Advanced Encryption Standard)](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard). It is heavily tested and relied upon by our government. It is definitely good enough for us and it is part of the .NET Crypto API.\r\n\r\n## A Basic File Copier\r\nStart off by creating a console project, so we can focus on just the interesting bits. Just so we know we are starting from the same place, this is a basic console project source file:\r\n\r\n    using System;\r\n    using System.Collections.Generic;\r\n    using System.Linq;\r\n    using System.Text;\r\n    using System.Threading.Tasks;\r\n    \r\n    namespace Tutorial01\r\n    {\r\n        class Program\r\n        {\r\n            static void Main(string[] args)\r\n            {\r\n            }\r\n       }\r\n    }\r\n\r\nThis will run, but do nothing interesting. Before we get into the details of encryption, let's get some basic functionality working. We simply want to copy the input file to the output file without making any changes to it. This way, we know we have something working that we can build on.\r\n\r\n    using System;\r\n    using System.IO;\r\n    \r\n    namespace Tutorial01\r\n    {\r\n        class Program\r\n        {\r\n            static void Main(string[] args)\r\n            {\r\n                if (args.Length != 2)\r\n                {\r\n                    Console.WriteLine(\"You must provide the name of a file to read and the name of a file to write.\");\r\n                    return;\r\n                }\r\n\r\n                var sourceFilename = args[0];\r\n                var destinationFilename = args[1];\r\n    \r\n                using (var sourceStream = File.OpenRead(sourceFilename))\r\n                using (var destinationStream = File.Create(destinationFilename))\r\n                {\r\n                    sourceStream.CopyTo(destinationStream);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nIn the above code, that we require two arguments be provided. If not, we return with a friendly tip. Otherwise, we get the source filename as the first argument and the destination filename as the second argument. You might want to add some code to make sure the source file exists, but I'm going to skip that so we can focus on the core mechanics.\r\n\r\nThe real work is the five lines of code that start on line 19 with the `using` statement. We open our source file for reading (line 19) and we create our destination file for writing (line 20). We get a stream for each file and simply copy the contents of one file to the outher using the `CopyTo` method (line 22). If you are following along, this is a good time to make sure you can get this working and that you can create the target file identical to the source.\r\n\r\nLast updated: April 5, 2015",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}